function updateBudgetInfos() {
  var $orderTotalBudget = $('#order-total-budget');
  var $orderSelectedProjects = $('#order-selected-projects');
  var $orderProgress = $('#order-progress');
  var $votationBanner = $('#VotationBanner');
  var $projectItem = $('#project-<%= project.id %>-item');
  var $projectBudgetButton = $('#project-<%= project.id %>-budget-button');
  var $budgetConfirm = $('#budget-confirm');
  console.log("orderTotalBudget");
  if ($orderTotalBudget.length > 0)
    morphdom($orderTotalBudget[0], '<%= j(render partial: "decidim/lausanne/budgets/projects/order_total_budget").strip.html_safe %>');
  console.log("votationBanner");
  if ($votationBanner.length > 0)
    morphdom($votationBanner[0], '<%= j(render partial: "decidim/lausanne/budgets/projects/votation_banner").strip.html_safe %>');
  console.log("orderSelectedProjects");
  if ($orderSelectedProjects.length > 0)
    morphdom($orderSelectedProjects[0], '<%= j(render partial: "decidim/lausanne/budgets/projects/order_selected_projects").strip.html_safe %>');
  console.log("orderProgress");
  if ($orderProgress.length > 0)
    morphdom($orderProgress[0], '<%= j(render partial: "decidim/lausanne/budgets/projects/order_progress").strip.html_safe %>');
  console.log("budgetConfirm");
  if ($budgetConfirm.length > 0)
    morphdom($budgetConfirm[0], '<%= j(render partial: "decidim/lausanne/budgets/projects/budget_confirm").strip.html_safe %>')

  $("#order-progress").foundation();
  $(".budget-summary__selected").foundation();
  if ($projectItem.length > 0) {
    morphdom($projectItem[0], '<%= j(render partial: "decidim/lausanne/budgets/projects/project", locals: { project: project }).strip.html_safe %>');
  }
  console.log("projectBudgetButton");
  if ($projectBudgetButton.length > 0) {
    morphdom($projectBudgetButton[0], '<%= j(render partial: "decidim/lausanne/budgets/projects/project_budget_button", locals: { project: project }).strip.html_safe %>');
  }
}
updateBudgetInfos();
$(window).on("popstate", function(e){
  if(e.originalEvent.state !== null) {
    console.log("history.back triggered")
    updateBudgetInfos();
  }
})
